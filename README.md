# ENAEA自动刷课助手

> 中国教育干部网络学院（enaea.edu.cn）自动刷课工具

[![Version](https://img.shields.io/badge/version-1.0-blue.svg)](https://github.com/chnlion/enaea-auto-study)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Tampermonkey](https://img.shields.io/badge/Tampermonkey-4.0+-orange.svg)](https://www.tampermonkey.net/)

## ✨ 功能特性

### 🔥 核心功能

- **🤖 自动连续刷课** - 课程完成后自动刷新并继续下一门，无需人工干预
- **📄 多页智能检测** - 自动翻页检测所有课程，支持任意页数
- **⚡ 倍速播放** - 支持1x/2x/4x倍速播放，快速完成课程
- **🔇 自动静音** - 自动静音播放，不影响其他工作
- **🎯 智能跳转** - 自动跳转到未完成的视频，节省时间

### 🎛️ 差异化控制面板

根据页面类型显示不同的控制选项：

**列表页面板**：
- 列表页自动选课
- 自动连续刷课开关
- 检测间隔设置
- 已完成课程计数
- 倍速和静音设置
- 立即选择课程
- 刷新进度
- 清除完成信号

**播放页面板**：
- 倍速和静音控制
- 播放页自动跳转
- 自动连续刷课开关
- 检测间隔设置
- 检测未完成视频
- 暂停/恢复检测
- 立即检测完成度

### 🔒 安全机制

- **连续刷课限制** - 默认50门课程后自动暂停
- **实时进度显示** - 随时查看已完成的课程数量
- **手动控制** - 可随时暂停/恢复自动刷课
- **完成提醒** - 所有课程完成后弹窗提示

---

## 📦 安装

### 1. 安装 Tampermonkey

首先需要安装 Tampermonkey 浏览器扩展：

- [Chrome](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
- [Firefox](https://addons.mozilla.org/firefox/addon/tampermonkey/)
- [Edge](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd)
- [Safari](https://apps.apple.com/app/tampermonkey/id1482490089)

### 2. 安装脚本

安装 Tampermonkey 后，点击下方链接安装脚本：

- [📥 从 Greasy Fork 安装](https://greasyfork.org/zh-CN/scripts/556279-enaea%E8%87%AA%E5%8A%A8%E5%88%B7%E8%AF%BE%E5%8A%A9%E6%89%8B)
- 或者手动安装：复制 `enaea-auto-study.js` 的内容，在 Tampermonkey 中创建新脚本并粘贴

---

## 🚀 使用方法

### 快速开始

1. **访问网站**
   - 打开 [中国教育干部网络学院](https://study.enaea.edu.cn/)
   - 登录您的账号

2. **开启自动刷课**
   - 进入课程列表页
   - 在右上角找到浮动控制面板
   - 勾选 "🔥 自动连续刷课"

3. **坐等完成**
   - 脚本会自动选择未完成的课程
   - 自动播放并检测完成度
   - 完成后自动刷新并继续下一门
   - 所有课程完成后弹窗提示

### 详细说明

#### 控制面板位置

脚本启动后，页面右上角会出现一个紫色渐变的浮动面板：

```
┌─────────────────────┐
│ 🎓 刷课助手 v1.0    │
│      📋 当前：列表页│
├─────────────────────┤
│ ... 控制选项 ...    │
└─────────────────────┘
```

#### 主要设置

**倍速播放**：
- `1x` - 正常速度
- `2x` - 2倍速（推荐）
- `4x` - 4倍速（快速刷课）

**检测间隔**：
- `5秒` - 最快，适合网络好的情况
- `10秒` - 较快
- `15秒` - 默认推荐，平衡速度和稳定性
- `20秒` - 稳定
- `30秒` - 最稳定，适合网络慢的情况

**自动连续刷课**：
- ✅ 开启 - 完全自动化，一次完成所有课程
- ❌ 关闭 - 手动控制，适合测试或单独刷某门课

---

## 📊 工作流程

### 完整的自动刷课流程

```
┌────────────────────┐
│  1. 列表页         │
│  - 自动检测未完成  │
│  - 支持多页翻页    │
│  - 点击学习按钮    │
└──────┬─────────────┘
       │
       ↓
┌────────────────────┐
│  2. 播放页         │
│  - 4倍速播放       │
│  - 自动静音        │
│  - 自动跳转未完成  │
│  - 每15秒检测进度  │
└──────┬─────────────┘
       │
       ↓
┌────────────────────┐
│  3. 检测完成       │
│  - 所有视频100%    │
│  - 发送完成信号    │
└──────┬─────────────┘
       │
       ↓
┌────────────────────┐
│  4. 列表页刷新     │
│  - 接收完成信号    │
│  - 等待2秒         │
│  - 自动刷新        │
└──────┬─────────────┘
       │
       ↓
┌────────────────────┐
│  5. 继续下一门     │
│  - 选择下一个未完成│
│  - 循环步骤2-4     │
└──────┬─────────────┘
       │
       ↓
┌────────────────────┐
│  6. 全部完成       │
│  - 弹窗提示        │
│  - 自动停止        │
└────────────────────┘
```

### 多页检测流程

```
第1页：20门课程（全部100%）
   ↓ 检测完成
   ↓ 自动翻页
第2页：15门课程（第21门是0%）
   ↓ 找到未完成
   ↓ 开始学习
第21门课程完成
   ↓ 列表页刷新
   ↓ 继续第22门
   ...
第2页全部完成
   ↓ 检查下一页
   ↓ 没有第3页
🎉 所有课程完成！
```

---

## ⚙️ 配置说明

### 推荐配置

**快速刷课模式**（推荐）：
```
倍速：4x
检测间隔：15秒
自动静音：✅
自动连续刷课：✅
```

**稳定刷课模式**：
```
倍速：2x
检测间隔：20秒
自动静音：✅
自动连续刷课：✅
```

**谨慎模式**（首次使用）：
```
倍速：2x
检测间隔：20秒
自动静音：✅
自动连续刷课：❌（手动控制）
```

### 数据存储

脚本使用 localStorage 保存设置，包括：
- 播放倍速
- 静音状态
- 自动连续刷课开关
- 检测间隔时间
- 连续刷课计数

这些设置会在浏览器中持久保存，下次使用时自动恢复。

---

## 💡 使用技巧

### 1. 首次使用建议

1. 先在列表页手动点击"📋 立即选择课程"测试
2. 确认能正常打开课程页
3. 在课程页观察倍速和静音是否生效
4. 确认无误后再开启"自动连续刷课"

### 2. 监控运行状态

- 打开浏览器控制台（按 F12）
- 切换到 Console 标签
- 可以看到详细的运行日志
- 了解脚本当前在做什么

### 3. 中途暂停

如需暂停：
- **列表页**：取消"🔥 自动连续刷课"勾选
- **播放页**：点击"⏸️ 暂停检测"按钮

### 4. 处理异常

如果遇到问题：
1. 点击"🧹 清除完成信号"按钮
2. 刷新页面
3. 重新开启自动刷课

### 5. 查看进度

- 列表页浮窗显示"已连续完成: X 门"
- 手动刷新列表页查看课程进度
- 控制台显示详细的课程信息

---

## 🔧 技术细节

### 核心技术

- **跨标签页通信**：使用 localStorage 和 storage 事件
- **DOM 监控**：使用 MutationObserver 监控视频元素
- **播放速度劫持**：重写 HTMLMediaElement.prototype.playbackRate
- **异步递归**：实现多页自动翻页检测

### 兼容性

- ✅ Chrome 80+
- ✅ Firefox 75+
- ✅ Edge 80+
- ✅ Safari 13+（需要 Tampermonkey）

### 匹配网址

脚本会在以下网址运行：
- `https://study.enaea.edu.cn/*` - 主站
- `https://*.ttcdw.cn/*` - 视频播放域名
- `https://*.ertcloud.net/*` - CDN 域名

---

## ❓ 常见问题

### Q: 脚本没有启动？
**A**: 检查以下几点：
1. Tampermonkey 是否已安装并启用
2. 脚本是否已启用（Tampermonkey 图标应该显示数字）
3. 刷新页面再试
4. 打开控制台查看是否有错误信息

### Q: 找不到浮动面板？
**A**: 
1. 查看页面右上角
2. 可能被其他元素遮挡，尝试拖动
3. 刷新页面
4. 检查浏览器缩放比例

### Q: 倍速播放不生效？
**A**:
1. 确认已勾选倍速选项
2. 某些视频可能有限制
3. 刷新页面重新加载脚本
4. 查看控制台日志

### Q: 自动连续刷课不工作？
**A**:
1. 确认"🔥 自动连续刷课"已勾选
2. 检查是否达到50门上限
3. 查看控制台是否有错误
4. 尝试点击"🧹 清除完成信号"

### Q: 如何只刷某一门课程？
**A**:
1. 关闭"自动连续刷课"
2. 在列表页手动点击要学习的课程
3. 脚本仍会自动播放和跳转

### Q: 多页检测失败？
**A**:
1. 检查网络连接
2. 翻页等待时间可能不够（默认2秒）
3. 手动点击"📋 立即选择课程"重试

### Q: 课程完成后没有自动跳转？
**A**:
1. 检查"自动连续刷课"是否开启
2. 等待2秒，脚本需要时间处理
3. 查看控制台日志了解详情
4. 手动刷新列表页

### Q: 如何重置所有设置？
**A**:
1. 点击"🧹 清除完成信号"
2. 或在控制台执行：
   ```javascript
   localStorage.clear();
   location.reload();
   ```

---

## 🐛 问题反馈

如果遇到问题或有建议，欢迎反馈：

- 🐛 Issues: [GitHub Issues](https://github.com/chnlion/enaea-auto-study/issues)
- 💬 Discussion: [GitHub Discussions](https://github.com/chnlion/enaea-auto-study/discussions)

提交问题时请包含：
1. 浏览器版本
2. Tampermonkey 版本
3. 脚本版本
4. 问题描述
5. 控制台日志（如有）

---

## 📄 开源协议

本项目采用 [MIT License](LICENSE) 开源协议。

---

## ⚠️ 免责声明

1. 本脚本仅供学习交流使用
2. 请遵守网站的使用条款和相关规定
3. 使用本脚本产生的任何后果由使用者自行承担
4. 建议合理安排学习时间，认真完成课程内容

---

## 🙏 致谢

感谢所有使用和支持本项目的用户！

---

## 📜 版本历史

### v1.0 (2025-11-19)

首个正式发布版本，包含以下功能：

#### ✨ 核心功能
- 自动连续刷课
- 多页智能检测和翻页
- 倍速播放（1x/2x/4x）
- 自动静音
- 智能跳转未完成视频

#### 🎛️ 控制面板
- 差异化显示（列表页/播放页）
- 可拖动、可最小化
- 实时状态显示

#### 🔒 安全机制
- 连续刷课上限保护
- 手动暂停/恢复
- 完成提醒

#### 📄 多页支持
- 自动翻页检测
- 支持任意页数
- 智能判断页面状态

---

**作者**: Liontooth  
**版本**: v1.0  
**更新日期**: 2025-11-19  
**许可证**: MIT

---

<p align="center">
  Made with ❤️ for ENAEA students
</p>
